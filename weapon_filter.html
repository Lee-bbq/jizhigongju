<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>武器筛选器</title>
    <style>
*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);min-height:100vh;color:#fff;padding:20px}.container{max-width:1400px;margin:0 auto}header{text-align:center;padding:30px 0;border-bottom:2px solid #4a9eff;margin-bottom:30px}h1{font-size:2.5em;background:linear-gradient(90deg,#4a9eff,#ff6b9d);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-shadow:0 0 30px rgba(74,158,255,0.3)}.filter-section{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:25px;margin-bottom:40px}.filter-card{background:rgba(255,255,255,0.05);border-radius:15px;padding:25px;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.1);transition:all 0.3s ease}.filter-card:hover{transform:translateY(-5px);box-shadow:0 10px 40px rgba(74,158,255,0.2);border-color:rgba(74,158,255,0.3)}.filter-title{font-size:1.3em;margin-bottom:20px;padding-bottom:10px;border-bottom:1px solid rgba(255,255,255,0.1);display:flex;justify-content:space-between;align-items:center}.filter-title .badge{font-size:0.75em;padding:4px 12px;border-radius:20px;background:rgba(74,158,255,0.2);color:#4a9eff}.main-attrs{display:flex;flex-wrap:wrap;gap:10px}.option-btn{padding:10px 18px;border:2px solid rgba(255,255,255,0.2);background:rgba(255,255,255,0.05);color:#fff;border-radius:8px;cursor:pointer;transition:all 0.3s ease;font-size:0.95em}.option-btn:hover:not(:disabled){border-color:#4a9eff;background:rgba(74,158,255,0.1)}.option-btn.selected{border-color:#4a9eff;background:rgba(74,158,255,0.2);box-shadow:0 0 15px rgba(74,158,255,0.3)}.option-btn:disabled{opacity:0.4;cursor:not-allowed}.option-btn:disabled:hover{border-color:rgba(255,255,255,0.2);background:rgba(255,255,255,0.05)}.secondary-sections{display:flex;flex-direction:column;gap:20px}.secondary-filter{background:rgba(255,255,255,0.03);border-radius:12px;padding:20px}.secondary-title{font-size:1.1em;margin-bottom:15px;color:#aaa;display:flex;justify-content:space-between;align-items:center}.secondary-title::before{content:'';width:4px;height:18px;background:linear-gradient(180deg,#ff6b9d,#c44dff);border-radius:2px}.secondary-badge{font-size:0.75em;padding:4px 12px;border-radius:20px;background:rgba(255,107,157,0.2);color:#ff6b9d}.skill-badge{font-size:0.75em;padding:4px 12px;border-radius:20px;background:rgba(196,77,255,0.2);color:#c44dff}.secondary-options{display:flex;flex-wrap:wrap;gap:10px}.secondary-options .option-btn{border-color:rgba(255,107,157,0.3)}.secondary-options .option-btn:hover:not(:disabled){border-color:#ff6b9d;background:rgba(255,107,157,0.1)}.secondary-options .option-btn.selected{border-color:#ff6b9d;background:rgba(255,107,157,0.2);box-shadow:0 0 15px rgba(255,107,157,0.3)}.skill-options .option-btn{border-color:rgba(196,77,255,0.3)}.skill-options .option-btn:hover:not(:disabled){border-color:#c44dff;background:rgba(196,77,255,0.1)}.skill-options .option-btn.selected{border-color:#c44dff;background:rgba(196,77,255,0.2);box-shadow:0 0 15px rgba(196,77,255,0.3)}.section-disabled{opacity:0.4;pointer-events:none}.results-header{display:flex;flex-direction:column;gap:20px;margin-bottom:25px;padding:20px;background:rgba(255,255,255,0.05);border-radius:12px}.star-filter-row{display:flex;align-items:center;gap:15px;flex-wrap:wrap}.star-filter-title{font-size:1.1em;color:#aaa;min-width:90px}.star-filter-options{display:flex;flex-wrap:wrap;gap:10px}.star-filter-options .option-btn{min-width:80px}#starFilter .option-btn:nth-child(1){border-color:rgba(255,165,0,0.6)}#starFilter .option-btn:nth-child(1):hover:not(:disabled){border-color:#ff9500;background:rgba(255,165,0,0.1)}#starFilter .option-btn:nth-child(1).selected{border-color:#ff9500;background:rgba(255,165,0,0.2);box-shadow:0 0 15px rgba(255,165,0,0.4)}#starFilter .option-btn:nth-child(2){border-color:rgba(255,215,0,0.3)}#starFilter .option-btn:nth-child(2):hover:not(:disabled){border-color:#ffd700;background:rgba(255,215,0,0.1)}#starFilter .option-btn:nth-child(2).selected{border-color:#ffd700;background:rgba(255,215,0,0.2);box-shadow:0 0 15px rgba(255,215,0,0.3)}#categoryFilter .option-btn{border-color:rgba(74,158,255,0.3);min-width:80px}#categoryFilter .option-btn:hover:not(:disabled){border-color:#4a9eff;background:rgba(74,158,255,0.1)}#categoryFilter .option-btn.selected{border-color:#4a9eff;background:rgba(74,158,255,0.2);box-shadow:0 0 15px rgba(74,158,255,0.3)}#regionFilter .option-btn{border-color:rgba(74,158,255,0.3);min-width:80px}#regionFilter .option-btn:hover:not(:disabled){border-color:#4a9eff;background:rgba(74,158,255,0.1)}#regionFilter .option-btn.selected{border-color:#4a9eff;background:rgba(74,158,255,0.2);box-shadow:0 0 15px rgba(74,158,255,0.3)}.results-count-row{display:flex;justify-content:space-between;align-items:center;border-top:1px solid rgba(255,255,255,0.1);padding-top:20px}.search-mode-row{display:flex;align-items:center;padding:15px;background:rgba(255,107,157,0.1);border-radius:10px;border:1px solid rgba(255,107,157,0.3);margin-bottom:15px}.search-input-container{flex:1;margin-left:20px}.search-input{width:100%;padding:10px 15px;border:2px solid rgba(255,255,255,0.2);background:rgba(255,255,255,0.05);color:#fff;border-radius:8px;font-size:1em;outline:none;transition:all 0.3s ease}.search-input:focus{border-color:#ff6b9d;box-shadow:0 0 10px rgba(255,107,157,0.3)}.search-input::placeholder{color:rgba(255,255,255,0.5)}.switch-label{display:flex;align-items:center;cursor:pointer;user-select:none}.switch-input{display:none}.switch-slider{width:50px;height:26px;background:rgba(255,255,255,0.2);border-radius:13px;position:relative;transition:all 0.3s ease;margin-right:15px}.switch-slider::before{content:'';position:absolute;width:22px;height:22px;background:#fff;border-radius:50%;top:2px;left:2px;transition:all 0.3s ease}.switch-input:checked + .switch-slider{background:linear-gradient(90deg,#ff6b9d,#c44dff)}.switch-input:checked + .switch-slider::before{transform:translateX(24px)}.switch-text{font-size:1.1em;color:#ff6b9d;font-weight:bold}.results-count{font-size:1.2em}.results-count .number{color:#4a9eff;font-weight:bold;font-size:1.3em}.reset-btn{padding:12px 25px;border:2px solid #ff6b9d;background:rgba(255,107,157,0.1);color:#ff6b9d;border-radius:8px;cursor:pointer;transition:all 0.3s ease;font-size:1em}.reset-btn:hover{background:#ff6b9d;color:#fff;transform:translateY(-2px);box-shadow:0 5px 20px rgba(255,107,157,0.4)}.results-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:25px}.weapon-card{background:rgba(255,255,255,0.05);border-radius:15px;padding:20px;border:2px solid rgba(255,255,255,0.1);transition:all 0.3s ease;cursor:pointer;position:relative;overflow:hidden}.weapon-card.star-6{border-color:rgba(255,165,0,0.6);box-shadow:0 0 20px rgba(255,165,0,0.2)}.weapon-card.star-6:hover{transform:translateY(-8px);border-color:rgba(255,165,0,1);box-shadow:0 0 30px rgba(255,165,0,0.4)}.weapon-card.star-5{border-color:rgba(255,215,0,0.6);box-shadow:0 0 20px rgba(255,215,0,0.2)}.weapon-card.star-5:hover{transform:translateY(-8px);border-color:rgba(255,215,0,1);box-shadow:0 0 30px rgba(255,215,0,0.4)}.weapon-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#4a9eff,#ff6b9d,#c44dff);transform:scaleX(0);transition:transform 0.3s ease}.weapon-card:hover::before{transform:scaleX(1)}.weapon-name{font-size:1.4em;margin-bottom:15px;color:#4a9eff}.category-badge{font-size:0.6em;color:#aaa;background:rgba(255,255,255,0.1);padding:4px 10px;border-radius:12px;margin-left:12px;vertical-align:middle}.weapon-attrs{display:flex;flex-direction:column;gap:10px}.attr-row{display:flex;align-items:flex-start;gap:8px}.attr-label{color:#888;font-size:0.9em;min-width:70px}.attr-values{color:#ddd;font-size:0.95em}.no-results{text-align:center;padding:60px 20px;background:rgba(255,255,255,0.03);border-radius:15px;border:2px dashed rgba(255,255,255,0.1)}.no-results .icon{font-size:4em;margin-bottom:20px;opacity:0.5}.no-results .text{font-size:1.2em;color:#888}.version-info{text-align:center;padding:30px 0;color:#666;font-size:0.95em;border-top:1px solid rgba(255,255,255,0.1);margin-top:50px}@media (max-width:768px) { h1{font-size:1.8em}.filter-section{grid-template-columns:1fr}.results-grid{grid-template-columns:1fr}.star-filter-row{flex-direction:column;align-items:flex-start;gap:10px}.star-filter-title{min-width:auto;margin-bottom:5px}.option-btn{padding:8px 14px;font-size:0.9em;min-width:auto}.search-mode-row{flex-direction:column;gap:15px;padding:15px}.search-input-container{margin-left:0;width:100%}.filter-card{padding:20px}.weapon-card{padding:15px}.weapon-name{font-size:1.2em}.usage-instruction{padding:20px;margin:20px 0}.usage-instruction h3{font-size:1.1em}.usage-instruction li{font-size:0.9em}}.usage-instruction{background:rgba(255,255,255,0.03);border-radius:15px;padding:25px;margin:30px 0;border:1px solid rgba(255,255,255,0.1)}.usage-instruction h3{font-size:1.3em;color:#4a9eff;margin-bottom:20px;padding-bottom:10px;border-bottom:1px solid rgba(255,255,255,0.1)}.usage-instruction ol{margin-left:20px;line-height:1.8}.usage-instruction li{color:#aaa;margin-bottom:10px}.usage-instruction li:last-child{margin-bottom:0}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>⚔️ 武器筛选器</h1>
        </header>

        <!-- 检索模式开关 -->
        <div class="search-mode-row">
            <label class="switch-label">
                <input type="checkbox" id="searchModeSwitch" class="switch-input" onchange="toggleSearchMode()">
                <span class="switch-slider"></span>
                <span class="switch-text">刻写</span>
            </label>
            <!-- 检索模式下的搜索框 -->
            <div class="search-input-container" id="searchInputContainer">
                <input type="text" id="searchInput" class="search-input" placeholder="输入武器名称搜索..." oninput="handleSearchInput()">
            </div>
        </div>

        <div class="filter-section">
            <!-- 基础属性选择 -->
            <div class="filter-card">
                <div class="filter-title">
                    基础属性
                    <span class="badge" id="mainBadge">已选 0/3</span>
                </div>
                <div class="main-attrs" id="mainAttrs"></div>
            </div>

            <!-- 附加属性和技能属性 -->
            <div class="filter-card secondary-sections">
                <div class="secondary-filter" id="secondaryFilter">
                    <div class="secondary-title">
                        <span>附加属性</span>
                        <span class="secondary-badge" id="secondaryBadge">已选 0/1</span>
                    </div>
                    <div class="secondary-options" id="secondaryAttrs"></div>
                </div>

                <div class="secondary-filter" id="skillFilter">
                    <div class="secondary-title">
                        <span>技能属性</span>
                        <span class="skill-badge" id="skillBadge">已选 0/1</span>
                    </div>
                    <div class="skill-options" id="skillAttrs"></div>
                </div>
            </div>
        </div>

        <!-- 筛选结果 -->
        <div class="results-header">
            <!-- 淤积点筛选 -->
            <div class="star-filter-row">
                <div class="star-filter-title">淤积点：</div>
                <div class="star-filter-options" id="regionFilter"></div>
            </div>

            <!-- 武器类别筛选 -->
            <div class="star-filter-row" style="display:none;">
                <div class="star-filter-title">武器类别：</div>
                <div class="star-filter-options" id="categoryFilter"></div>
            </div> 
            
            <!-- 武器星级筛选 -->
            <div class="star-filter-row">
                <div class="star-filter-title">星级：</div>
                <div class="star-filter-options" id="starFilter"></div>
            </div>
            
            <div class="results-count-row">
                <div class="results-count">
                    找到 <span class="number" id="resultCount">0</span> 把武器
                </div>
                <button class="reset-btn" onclick="resetFilters()">重置筛选</button>
            </div>
        </div>

        <div class="results-grid" id="resultsGrid"></div>
        
        <div class="usage-instruction">
            <h3>开启刻写模式使用说明</h3>
            <ol>
                <li>选三个基础属性</li>
                <li>选一个附加属性或技能属性</li>
                <li>选一个淤积点</li>
            </ol>
        </div>
        
        <div class="version-info">游戏版本：公测<br/>up：<a href="https://space.bilibili.com/1893060527">辣椒酱</a></div>

    </div>

    <script>
let weapons=[{"id":47,"name":"使命必达","stars":6,"category":"施术单元","mainAttrs":["意志"],"secondaryAttrs":["终结技充能效率"],"skillAttrs":["追袭"]},{"id":39,"name":"爆破单元","stars":6,"category":"施术单元","mainAttrs":["主能力值"],"secondaryAttrs":["源石技艺"],"skillAttrs":["迸发"]},{"id":31,"name":"昔日精品","stars":6,"category":"双手剑","mainAttrs":["意志"],"secondaryAttrs":["生命"],"skillAttrs":["效益"]},{"id":23,"name":"不知归","stars":6,"category":"单手剑","mainAttrs":["意志"],"secondaryAttrs":["攻击力"],"skillAttrs":["流转"]},{"id":15,"name":" 0.B.J.迅极","stars":5,"category":"手铳","mainAttrs":["敏捷"],"secondaryAttrs":["终结技充能效率"],"skillAttrs":["迸发"]},{"id":7,"name":"探骊","stars":5,"category":"双手剑","mainAttrs":["力量"],"secondaryAttrs":["终结技充能效率"],"skillAttrs":["迸发"]},{"id":46,"name":"熔铸火焰","stars":6,"category":"单手剑","mainAttrs":["智识"],"secondaryAttrs":["攻击力"],"skillAttrs":["夜幕"]},{"id":38,"name":"沧溟星梦","stars":6,"category":"施术单元","mainAttrs":["智识"],"secondaryAttrs":["治疗效率"],"skillAttrs":["附术"]},{"id":30,"name":"典范","stars":6,"category":"双手剑","mainAttrs":["主能力值"],"secondaryAttrs":["攻击力"],"skillAttrs":["压制"]},{"id":22,"name":"宏愿","stars":6,"category":"单手剑","mainAttrs":["敏捷"],"secondaryAttrs":["攻击力"],"skillAttrs":["附术"]},{"id":14,"name":"作品:众生","stars":5,"category":"手铳","mainAttrs":["敏捷"],"secondaryAttrs":["法术伤害"],"skillAttrs":["附术"]},{"id":6,"name":"仰止","stars":5,"category":"单手剑","mainAttrs":["敏捷"],"secondaryAttrs":["物理伤害"],"skillAttrs":["夜幕"]},{"id":45,"name":"艺术暴君","stars":6,"category":"手铳","mainAttrs":["智识"],"secondaryAttrs":["暴击率"],"skillAttrs":["切骨"]},{"id":37,"name":"同类相食","stars":6,"category":"手铳","mainAttrs":["主能力值"],"secondaryAttrs":["法术伤害"],"skillAttrs":["附术"]},{"id":29,"name":"赫拉芬格","stars":6,"category":"双手剑","mainAttrs":["力量"],"secondaryAttrs":["攻击力"],"skillAttrs":["迸发"]},{"id":21,"name":"0.B.J.术识","stars":5,"category":"施术单元","mainAttrs":["智识"],"secondaryAttrs":["源石技艺"],"skillAttrs":["追袭"]},{"id":13,"name":"向心之引","stars":5,"category":"长柄武器","mainAttrs":["意志"],"secondaryAttrs":["电磁伤害"],"skillAttrs":["压制"]},{"id":5,"name":"0.B.J.轻芒","stars":5,"category":"单手剑","mainAttrs":["敏捷"],"secondaryAttrs":["攻击力"],"skillAttrs":["流转"]},{"id":44,"name":"黯色火炬","stars":6,"category":"单手剑","mainAttrs":["智识"],"secondaryAttrs":["灼热伤害"],"skillAttrs":["附术"]},{"id":36,"name":"楔子","stars":6,"category":"手铳","mainAttrs":["主能力值"],"secondaryAttrs":["暴击率"],"skillAttrs":["附术"]},{"id":28,"name":"大雷斑","stars":6,"category":"双手剑","mainAttrs":["力量"],"secondaryAttrs":["生命"],"skillAttrs":["医疗"]},{"id":20,"name":"布道自由","stars":5,"category":"施术单元","mainAttrs":["意志"],"secondaryAttrs":["治疗效率"],"skillAttrs":["医疗"]},{"id":12,"name":"0.B.J.尖峰","stars":5,"category":"长柄武器","mainAttrs":["意志"],"secondaryAttrs":["物理伤害"],"skillAttrs":["附术"]},{"id":4,"name":"十二间","stars":5,"category":"单手剑","mainAttrs":["敏捷"],"secondaryAttrs":["攻击力"],"skillAttrs":["附术"]},{"id":43,"name":"领航者","stars":6,"category":"手铳","mainAttrs":["智识"],"secondaryAttrs":["寒冷伤害"],"skillAttrs":["附术"]},{"id":35,"name":"J.E.T.","stars":6,"category":"长柄武器","mainAttrs":["主能力值"],"secondaryAttrs":["攻击力"],"skillAttrs":["压制"]},{"id":27,"name":"白夜新星","stars":6,"category":"单手剑","mainAttrs":["主能力值"],"secondaryAttrs":["源石技艺"],"skillAttrs":["附术"]},{"id":19,"name":"迷失荒野","stars":5,"category":"施术单元","mainAttrs":["智识"],"secondaryAttrs":["电磁伤害"],"skillAttrs":["附术"]},{"id":11,"name":"嵌合正义","stars":5,"category":"长柄武器","mainAttrs":["力量"],"secondaryAttrs":["终结技充能效率"],"skillAttrs":["残暴"]},{"id":3,"name":"逐鳞3.0","stars":5,"category":"单手剑","mainAttrs":["力量"],"secondaryAttrs":["寒冷伤害"],"skillAttrs":["压制"]},{"id":42,"name":"作品:蚀迹","stars":6,"category":"施术单元","mainAttrs":["意志"],"secondaryAttrs":["自然伤害"],"skillAttrs":["压制"]},{"id":34,"name":"骁勇","stars":6,"category":"长柄武器","mainAttrs":["敏捷"],"secondaryAttrs":["物理伤害"],"skillAttrs":["巧技"]},{"id":26,"name":"显赫声名","stars":6,"category":"单手剑","mainAttrs":["主能力值"],"secondaryAttrs":["物理伤害"],"skillAttrs":["残暴"]},{"id":18,"name":"莫奈何","stars":5,"category":"施术单元","mainAttrs":["意志"],"secondaryAttrs":["终结技充能效率"],"skillAttrs":["昂扬"]},{"id":10,"name":"0.B.J.重荷","stars":5,"category":"双手剑","mainAttrs":["力量"],"secondaryAttrs":["生命"],"skillAttrs":["效益"]},{"id":2,"name":"坚城铸造者","stars":5,"category":"单手剑","mainAttrs":["智识"],"secondaryAttrs":["终结技充能效率"],"skillAttrs":["昂扬"]},{"id":41,"name":"骑士精神","stars":6,"category":"施术单元","mainAttrs":["意志"],"secondaryAttrs":["生命"],"skillAttrs":["医疗"]},{"id":33,"name":"负山","stars":6,"category":"长柄武器","mainAttrs":["敏捷"],"secondaryAttrs":["物理伤害"],"skillAttrs":["效益"]},{"id":25,"name":"热熔切割器","stars":6,"category":"单手剑","mainAttrs":["意志"],"secondaryAttrs":["攻击力"],"skillAttrs":["流转"]},{"id":17,"name":"悼亡诗","stars":5,"category":"施术单元","mainAttrs":["智识"],"secondaryAttrs":["攻击力"],"skillAttrs":["夜幕"]},{"id":9,"name":"终点之声","stars":5,"category":"双手剑","mainAttrs":["力量"],"secondaryAttrs":["生命"],"skillAttrs":["医疗"]},{"id":1,"name":"钢铁余音","stars":5,"category":"单手剑","mainAttrs":["敏捷"],"secondaryAttrs":["物理伤害"],"skillAttrs":["巧技"]},{"id":40,"name":"遗忘","stars":6,"category":"施术单元","mainAttrs":["智识"],"secondaryAttrs":["法术伤害"],"skillAttrs":["夜幕"]},{"id":32,"name":"破碎君王","stars":6,"category":"双手剑","mainAttrs":["力量"],"secondaryAttrs":["暴击率"],"skillAttrs":["粉碎"]},{"id":24,"name":"扶摇","stars":6,"category":"单手剑","mainAttrs":["主能力值"],"secondaryAttrs":["暴击率"],"skillAttrs":["夜幕"]},{"id":16,"name":"理性告别","stars":5,"category":"手铳","mainAttrs":["力量"],"secondaryAttrs":["灼热伤害"],"skillAttrs":["追袭"]},{"id":8,"name":"古渠","stars":5,"category":"双手剑","mainAttrs":["力量"],"secondaryAttrs":["源石技艺"],"skillAttrs":["残暴"]}],mainAttributes=["敏捷","力量","意志","智识","主能力值"],secondaryAttributes=["攻击力","生命","物理伤害","灼热伤害","电磁伤害","寒冷伤害","自然伤害","暴击率","源石技艺","终结技充能效率","法术伤害","治疗效率"],skillAttributes=["强攻","压制","追袭","粉碎","昂扬","巧技","残暴","附术","医疗","切骨","迸发","夜幕","流转","效益"],weaponCategories=["单手剑","双手剑","长柄武器","手铳","施术单元"],regions=[{id:1,name:"枢纽区",mainAttrs:["敏捷","力量","意志","智识","主能力值"],secondaryAttrs:["攻击力","灼热伤害","电磁伤害","寒冷伤害","自然伤害","源石技艺","终结技充能效率","法术伤害"],skillAttrs:["强攻","压制","追袭","粉碎","巧技","迸发","流转","效益"]},
{id:2,name:"源石研究园",mainAttrs:["敏捷","力量","意志","智识","主能力值"],secondaryAttrs:["攻击力","物理伤害","电磁伤害","寒冷伤害","自然伤害","暴击率","终结技充能效率","法术伤害"],skillAttrs:["压制","追袭","昂扬","巧技","附术","医疗","切骨","效益"]},
{id:3,name:"矿脉源区",mainAttrs:["敏捷","力量","意志","智识","主能力值"],secondaryAttrs:["生命","物理伤害","灼热伤害","寒冷伤害","自然伤害","暴击率","源石技艺","治疗效率"],skillAttrs:["强攻","压制","巧技","残暴","附术","迸发","夜幕","效益"]},
{id:4,name:"供能高地",mainAttrs:["敏捷","力量","意志","智识","主能力值"],secondaryAttrs:["攻击力","生命","物理伤害","灼热伤害","自然伤害","暴击率","源石技艺","治疗效率"],skillAttrs:["追袭","粉碎","昂扬","残暴","附术","医疗","切骨","流转"]},
{id:5,name:"武陵城",mainAttrs:["敏捷","力量","意志","智识","主能力值"],secondaryAttrs:["攻击力","生命","电磁伤害","寒冷伤害","暴击率","终结技充能效率","法术伤害","治疗效率"],skillAttrs:["强攻","粉碎","残暴","医疗","切骨","迸发","夜幕","流转"]}],selectedMain=[],selectedSecondary=null,selectedSkill=null,selectedStar=null,selectedCategory=null,selectedRegion=null,isSearchMode=!0,searchKeyword="";function init(){renderMainAttributes(),renderCategoryFilter(),renderStarFilter(),renderRegionFilter(),renderSecondaryAttributes(),renderSkillAttributes(),filterWeapons()}function renderMainAttributes(){let s=document.getElementById("mainAttrs");s.innerHTML="",mainAttributes.forEach(e=>{var t=document.createElement("button");t.className="option-btn",t.textContent=e,t.onclick=()=>toggleMainAttribute(e),selectedMain.includes(e)&&t.classList.add("selected"),3<=selectedMain.length&&!selectedMain.includes(e)&&(t.disabled=!0),s.appendChild(t)}),updateMainBadge()}function renderCategoryFilter(){let s=document.getElementById("categoryFilter");s.innerHTML="",weaponCategories.forEach(e=>{var t=document.createElement("button");t.className="option-btn",t.textContent=e,t.onclick=()=>toggleCategory(e),selectedCategory===e&&t.classList.add("selected"),s.appendChild(t)})}function toggleCategory(e){selectedCategory=selectedCategory===e?null:e,renderCategoryFilter(),filterWeapons()}function renderStarFilter(){let s=document.getElementById("starFilter");s.innerHTML="";[6,5].forEach(e=>{var t=document.createElement("button");t.className="option-btn",t.innerHTML=e+"星",t.onclick=()=>toggleStar(e),selectedStar===e&&t.classList.add("selected"),s.appendChild(t)})}function toggleStar(e){selectedStar=selectedStar===e?null:e,renderStarFilter(),filterWeapons()}function renderRegionFilter(){let s=document.getElementById("regionFilter");s.innerHTML="",regions.forEach(e=>{var t=document.createElement("button");t.className="option-btn",t.textContent=e.name,t.onclick=()=>toggleRegion(e),selectedRegion===e&&t.classList.add("selected"),s.appendChild(t)})}function toggleRegion(e){selectedRegion=selectedRegion===e?null:e,renderRegionFilter(),filterWeapons()}function renderSecondaryAttributes(){let s=document.getElementById("secondaryAttrs");s.innerHTML="",secondaryAttributes.forEach(e=>{var t=document.createElement("button");t.className="option-btn",t.textContent=e,t.onclick=()=>toggleSecondaryAttribute(e),selectedSecondary===e&&t.classList.add("selected"),null!==selectedSkill&&(t.disabled=!0),s.appendChild(t)})}function renderSkillAttributes(){let s=document.getElementById("skillAttrs");s.innerHTML="",skillAttributes.forEach(e=>{var t=document.createElement("button");t.className="option-btn",t.textContent=e,t.onclick=()=>toggleSkillAttribute(e),selectedSkill===e&&t.classList.add("selected"),null!==selectedSecondary&&(t.disabled=!0),s.appendChild(t)})}function toggleMainAttribute(t){if(selectedMain.includes(t))selectedMain=selectedMain.filter(e=>e!==t);else if(isSearchMode)selectedMain=[t];else{if(!(selectedMain.length<3))return void alert("最多只能选择3个主属性");selectedMain.push(t)}renderMainAttributes(),filterWeapons()}function toggleSecondaryAttribute(e){selectedSecondary=selectedSecondary===e?null:e,renderSecondaryAttributes(),updateSectionStyles(),filterWeapons()}function toggleSkillAttribute(e){selectedSkill=selectedSkill===e?null:e,renderSkillAttributes(),updateSectionStyles(),filterWeapons()}function toggleSearchMode(){isSearchMode=!document.getElementById("searchModeSwitch").checked;var e=document.getElementById("searchInputContainer"),t=document.getElementById("searchInput");isSearchMode?(e.style.display="block",t.focus()):(e.style.display="none",t.value="",searchKeyword=""),isSearchMode&&1<selectedMain.length&&(selectedMain=[selectedMain[0]],renderMainAttributes()),isSearchMode||null===selectedSkill||null===selectedSecondary||(selectedSkill=null,renderSkillAttributes()),updateBadges(),updateMainBadge(),updateSectionStyles(),filterWeapons()}function handleSearchInput(){var e=document.getElementById("searchInput");searchKeyword=e.value,filterWeapons()}function updateMainBadge(){var e=isSearchMode?1:3;document.getElementById("mainBadge").textContent=`已选 ${selectedMain.length}/`+e}function updateSectionStyles(){var e=document.getElementById("secondaryFilter"),t=document.getElementById("skillFilter");isSearchMode?(e.classList.remove("section-disabled"),t.classList.remove("section-disabled")):null!==selectedSkill?(e.classList.add("section-disabled"),t.classList.remove("section-disabled")):null!==selectedSecondary?(e.classList.remove("section-disabled"),t.classList.add("section-disabled")):(e.classList.remove("section-disabled"),t.classList.remove("section-disabled")),updateBadges()}function updateBadges(){var e=document.getElementById("secondaryBadge"),t=document.getElementById("skillBadge");isSearchMode?(e.textContent=null!==selectedSecondary?"已选 1/1":"已选 0/1",t.textContent=null!==selectedSkill?"已选 1/1":"已选 0/1"):null!==selectedSecondary?(e.textContent="已选 1/1",t.textContent="已选 0/0"):null!==selectedSkill?(e.textContent="已选 0/0",t.textContent="已选 1/1"):(e.textContent="已选 0/1",t.textContent="已选 0/1")}function filterWeapons(){let e=weapons;if(isSearchMode&&""!==searchKeyword.trim()){let t=searchKeyword.trim().toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t))}null!==selectedCategory&&(e=e.filter(e=>e.category===selectedCategory)),null!==selectedStar&&(e=e.filter(e=>e.stars===selectedStar));let t=e=null!==selectedRegion?e.filter(e=>{var t=e.mainAttrs.every(e=>selectedRegion.mainAttrs.includes(e)),s=0===e.secondaryAttrs.length||e.secondaryAttrs.every(e=>selectedRegion.secondaryAttrs.includes(e)),e=e.skillAttrs.every(e=>selectedRegion.skillAttrs.includes(e));return t&&s&&e}):e;0<selectedMain.length&&(e=e.filter(t=>selectedMain.some(e=>t.mainAttrs.includes(e)))),null!==selectedSecondary&&(e=e.filter(e=>e.secondaryAttrs.includes(selectedSecondary)),t=t.filter(e=>e.secondaryAttrs.includes(selectedSecondary))),null!==selectedSkill&&(e=e.filter(e=>e.skillAttrs.includes(selectedSkill)),t=t.filter(e=>e.skillAttrs.includes(selectedSkill))),renderResults(e),updateDisabledButtons(e,t)}function updateDisabledButtons(n,e){let s=new Set,l=new Set,r=new Set,a=new Set,d=new Set,i=new Set;n.forEach(e=>{e.mainAttrs.forEach(e=>s.add(e)),e.secondaryAttrs.forEach(e=>r.add(e)),e.skillAttrs.forEach(e=>a.add(e)),d.add(e.stars),i.add(e.category)}),e.forEach(e=>{e.mainAttrs.forEach(e=>l.add(e))});let c=null,o=null;null!==selectedRegion&&(new Set(selectedRegion.mainAttrs),c=new Set(selectedRegion.secondaryAttrs),o=new Set(selectedRegion.skillAttrs)),document.querySelectorAll("#mainAttrs .option-btn").forEach(e=>{var t=e.textContent;selectedMain.includes(t)||!(isSearchMode&&1<=selectedMain.length)&&(!isSearchMode||s.has(t))&&(isSearchMode||!(3<=selectedMain.length))&&(null===selectedCategory&&null===selectedStar&&null===selectedSecondary&&null===selectedSkill&&null===selectedRegion||s.has(t)||l.has(t))?e.disabled=!1:e.disabled=!0}),document.querySelectorAll("#categoryFilter .option-btn").forEach(e=>{var t=e.textContent;selectedCategory===t||i.has(t)?e.disabled=!1:e.disabled=!0}),document.querySelectorAll("#starFilter .option-btn").forEach(e=>{var t=parseInt(e.textContent.replace("星",""));selectedStar===t||d.has(t)?e.disabled=!1:e.disabled=!0}),document.querySelectorAll("#secondaryAttrs .option-btn").forEach(e=>{var t=e.textContent,s=selectedSecondary===t;(!isSearchMode||""===searchKeyword.trim()||r.has(t)||s)&&(isSearchMode||null===selectedSkill)&&(s||(null===selectedRegion||c.has(t))&&r.has(t))?e.disabled=!1:e.disabled=!0}),document.querySelectorAll("#skillAttrs .option-btn").forEach(e=>{var t=e.textContent,s=selectedSkill===t;(!isSearchMode||""===searchKeyword.trim()||a.has(t)||s)&&(isSearchMode||null===selectedSecondary)&&(s||(null===selectedRegion||o.has(t))&&a.has(t))?e.disabled=!1:e.disabled=!0}),document.querySelectorAll("#regionFilter .option-btn").forEach(e=>{let t=e.textContent;var s=selectedRegion&&selectedRegion.name===t;if(0===selectedMain.length&&null===selectedSecondary&&null===selectedSkill&&null===selectedRegion&&null===selectedStar&&""===searchKeyword.trim())e.disabled=!1;else if(s)e.disabled=!1;else{let l=regions.find(e=>e.name===t);l?(s=n.some(e=>{var t=e.mainAttrs.every(e=>l.mainAttrs.includes(e)),s=0===e.secondaryAttrs.length||e.secondaryAttrs.every(e=>l.secondaryAttrs.includes(e)),e=e.skillAttrs.every(e=>l.skillAttrs.includes(e));return t&&s&&e}),e.disabled=!s):e.disabled=!0}})}function renderResults(e){var t=document.getElementById("resultsGrid"),s=document.getElementById("resultCount"),e=e.sort((e,t)=>e.stars!==t.stars?t.stars-e.stars:t.id-e.id);s.textContent=e.length,t.innerHTML=0===e.length?`
                    <div class="no-results">
                        <div class="icon">⚔️</div>
                        <div class="text">没有找到匹配的武器</div>
                    </div>
                `:e.map(e=>`
                <div class="weapon-card star-${e.stars}">
                    <div class="weapon-name">${e.name} <span class="category-badge">${e.category}</span></div>
                    <div class="weapon-attrs">
                        <div class="attr-row">
                            <span class="attr-label">主属性：</span>
                            <span class="attr-values">${e.mainAttrs.join("、")}</span>
                        </div>
                        ${0<e.secondaryAttrs.length?`
                            <div class="attr-row">
                                <span class="attr-label">副属性：</span>
                                <span class="attr-values">${e.secondaryAttrs.join("、")}</span>
                            </div>
                        `:""}
                        ${0<e.skillAttrs.length?`
                            <div class="attr-row">
                                <span class="attr-label">附加能力：</span>
                                <span class="attr-values">${e.skillAttrs.join("、")}</span>
                            </div>
                        `:""}
                    </div>
                </div>
            `).join("")}function resetFilters(){selectedMain=[],selectedSecondary=null,selectedSkill=null,selectedStar=null,selectedRegion=null,selectedCategory=null,searchKeyword="";var e=document.getElementById("searchInput");e&&(e.value=""),renderMainAttributes(),renderCategoryFilter(),renderStarFilter(),renderRegionFilter(),renderSecondaryAttributes(),renderSkillAttributes(),updateSectionStyles(),filterWeapons()}init();
    </script>
</body>
</html>
